<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FB4747">
    <title>Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… | AndroGov</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { brandRed: '#FB4747', brandDark: '#1E293B' },
                    fontFamily: { sans: ['Tajawal', 'sans-serif'], serif: ['Playfair Display', 'serif'] }
                }
            }
        }
    </script>
    <style>
        .certificate-pattern {
            background-image: radial-gradient(#FB4747 0.5px, transparent 0.5px), radial-gradient(#FB4747 0.5px, #fff 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.05;
        }
        @media print {
            body * { visibility: hidden; }
            #certContainer, #certContainer * { visibility: visible; }
            #certContainer { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; border: none; box-shadow: none; transform: scale(0.95); transform-origin: top left; }
            .no-print { display: none !important; }
        }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white font-sans transition-colors duration-300 opacity-0">

    <div id="sidebar-container" class="no-print"></div>

    <div class="main-content-wrapper transition-all duration-300">
        <div id="header-container" class="no-print"></div>

        <main class="p-8 max-w-5xl mx-auto fade-in">
            
            <div class="flex items-center justify-between mb-8 no-print">
                <div>
                    <h1 class="text-2xl font-bold flex items-center gap-2">
                        <i class="fa-solid fa-file-contract text-brandRed"></i> Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª
                    </h1>
                    <p class="text-slate-500 text-sm mt-1">Ø´Ù‡Ø§Ø¯Ø© Ù…Ù„ÙƒÙŠØ© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© Ù„Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ†.</p>
                </div>
                <button onclick="window.print()" class="px-5 py-2 bg-slate-800 text-white rounded-xl hover:bg-slate-700 transition flex items-center gap-2 shadow-lg">
                    <i class="fa-solid fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
                </button>
            </div>

            <div id="certContainer" class="bg-white text-slate-800 relative p-10 md:p-16 border-[10px] border-double border-slate-200 shadow-2xl mx-auto max-w-4xl min-h-[700px] flex flex-col justify-between overflow-hidden">
                <div class="absolute inset-0 certificate-pattern pointer-events-none"></div>
                <div class="absolute top-0 left-0 w-32 h-32 border-t-[20px] border-l-[20px] border-brandRed/20"></div>
                <div class="absolute bottom-0 right-0 w-32 h-32 border-b-[20px] border-r-[20px] border-brandRed/20"></div>

                <div class="text-center relative z-10">
                    <div class="w-20 h-20 mx-auto mb-4 bg-brandRed/10 rounded-full flex items-center justify-center text-4xl text-brandRed">
                        <i class="fa-solid fa-building-columns"></i>
                    </div>
                    <h2 class="text-4xl font-serif font-bold tracking-wider text-slate-900 mb-2">Ø´Ù‡Ø§Ø¯Ø© Ù…Ù„ÙƒÙŠØ© Ø£Ø³Ù‡Ù…</h2>
                    <p class="text-sm uppercase tracking-[0.2em] text-slate-500">Share Certificate</p>
                </div>

                <div class="text-center space-y-8 my-10 relative z-10">
                    <p class="text-lg text-slate-600">
                        ÙŠØ´Ù‡Ø¯ Ù…Ø¬Ù„Ø³ Ø¥Ø¯Ø§Ø±Ø© <span class="font-bold text-slate-900">Ø´Ø±ÙƒØ© Ø§Ù†Ø¯Ø±ÙˆÙ…ÙŠØ¯Ø§ Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span> (Ø´.Ù….Ù…)<br>
                        Ø¨Ø£Ù† Ø§Ù„Ù…Ø³Ø§Ù‡Ù… / Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©:
                    </p>
                    
                    <h3 id="shName" class="text-3xl font-bold text-brandRed font-serif border-b-2 border-slate-100 inline-block pb-2 px-8">
                        ...
                    </h3>

                    <p class="text-lg text-slate-600">
                        Ù‡Ùˆ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ø³Ø¬Ù„ Ù„Ù€ <span id="shShares" class="font-bold text-slate-900 text-2xl mx-2">...</span> Ø³Ù‡Ù…Ø§Ù‹<br>
                        Ø¨Ù‚ÙŠÙ…Ø© Ø§Ø³Ù…ÙŠØ© Ù‚Ø¯Ø±Ù‡Ø§ (10 Ø±.Ø³) Ù„Ù„Ø³Ù‡Ù… Ø§Ù„ÙˆØ§Ø­Ø¯ Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.
                    </p>

                    <div class="grid grid-cols-2 gap-8 max-w-lg mx-auto bg-slate-50 p-6 rounded-xl border border-slate-100">
                        <div>
                            <p class="text-xs text-slate-400 uppercase">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</p>
                            <p id="shPercent" class="font-bold text-xl">...</p>
                        </div>
                        <div>
                            <p class="text-xs text-slate-400 uppercase">Ø±Ù‚Ù… Ø§Ù„Ù…Ø³Ø§Ù‡Ù…</p>
                            <p id="shID" class="font-bold text-xl font-mono text-slate-600">...</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between items-end mt-8 relative z-10 border-t border-slate-100 pt-8">
                    <div class="text-center">
                        <div class="h-16 flex items-end justify-center mb-2 font-serif text-slate-400 italic text-2xl">
                            Ayman
                        </div>
                        <p class="text-sm font-bold border-t border-slate-300 pt-2 w-48 mx-auto">Ø£Ù…ÙŠÙ† Ø³Ø± Ø§Ù„Ù…Ø¬Ù„Ø³</p>
                    </div>

                    <div class="relative w-24 h-24 flex items-center justify-center">
                        <div class="absolute inset-0 border-2 border-yellow-500 rounded-full opacity-30 animate-spin-slow"></div>
                        <div class="w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center text-white shadow-lg shadow-yellow-200">
                            <i class="fa-solid fa-medal text-3xl"></i>
                        </div>
                    </div>

                    <div class="text-center">
                        <div class="h-16 flex items-end justify-center mb-2 font-serif text-slate-400 italic text-2xl">
                            Al-Hawas
                        </div>
                        <p class="text-sm font-bold border-t border-slate-300 pt-2 w-48 mx-auto">Ø±Ø¦ÙŠØ³ Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
                    </div>
                </div>
                
                <div class="text-[10px] text-center text-slate-300 mt-4 font-mono">
                    System Generated ID: <span id="certSerial">...</span>
                </div>
            </div>

        </main>
    </div>

    <script src="data/company_policy.js"></script>
    <script src="js/components/layout.js"></script>
    <script src="js/components/bot.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. ØªØ«Ø¨ÙŠØª Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø³Ø§Ù‡Ù… (ÙˆØ§Ø¦Ù„ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ)
            const shareholderUser = {
                id: 'SH_USER_003',
                name: 'ÙˆØ§Ø¦Ù„ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ',
                displayName: 'ÙˆØ§Ø¦Ù„ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ',
                role: 'shareholder',
                email: 'w961@live.com',
                avatar: 'https://ui-avatars.com/api/?name=Wael+AlSuhaibani&background=EAB308&color=fff'
            };
            
            localStorage.setItem('currentUser', JSON.stringify(shareholderUser));
            localStorage.setItem('activeRole', 'shareholder');

            // 2. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
            const checkLibs = setInterval(() => {
                if (typeof Layout !== 'undefined' && typeof CompanyPolicy !== 'undefined') {
                    clearInterval(checkLibs);
                    
                    Layout.init();
                    loadCertificateData();
                    document.body.style.opacity = '1';
                    
                    console.log("ğŸš€ Certificates Loaded Successfully");
                }
            }, 50);
        });

        function loadCertificateData() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            const lang = localStorage.getItem('lang') || 'ar';

            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø§Ù‡Ù… ÙÙŠ CompanyPolicy
            const shData = CompanyPolicy.shareholders.find(s => s.email === user.email);

            if (shData) {
                // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const name = lang === 'ar' ? shData.name.ar : shData.name.en;
                document.getElementById('shName').innerText = name;
                document.getElementById('shShares').innerText = shData.shares.toLocaleString();
                document.getElementById('shPercent').innerText = shData.percent + '%';
                document.getElementById('shID').innerText = shData.id;
                
                // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… ØªØ³Ù„Ø³Ù„ÙŠ Ù„Ù„Ø´Ù‡Ø§Ø¯Ø©
                const datePart = new Date().getFullYear();
                const idPart = shData.id.split('_')[1];
                const randomPart = Math.floor(Math.random() * 9000) + 1000;
                document.getElementById('certSerial').innerText = `CERT-${datePart}-${idPart}-${randomPart}`;
            } else {
                console.error("Shareholder data not found for:", user.email);
            }
        }
    </script>
</body>
</html>
