<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eGov Portal | الدخول الموحد</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="auth-container"> <div class="page-controls">
        <button class="control-btn" onclick="I18n.toggleLang()" title="Language">
            <span id="langText" style="font-weight: 800; font-family: sans-serif;">EN</span>
        </button>
        <button class="control-btn" onclick="toggleTheme()" title="Theme">
            <i class="fa-solid fa-moon" id="themeIcon"></i>
        </button>
    </div>

    <div class="auth-card">
        <img src="favicon.png" alt="Logo" class="brand-logo"> <h1 class="system-title" data-i18n="brand">eGov Portal</h1>
        <p class="system-desc" data-i18n="portal_desc">نظام الحوكمة الرقمية والامتثال المؤسسي</p>

        <div id="loginAlert" style="display:none; background: #ff475722; color: #ff4757; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 13px;"></div>

        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <input type="email" id="email" class="form-control" data-i18n="email_placeholder" placeholder="البريد الإلكتروني" required>
                <i class="fa-regular fa-envelope"></i>
            </div>
            <div class="form-group">
                <input type="password" id="password" class="form-control" data-i18n="pass_placeholder" placeholder="كلمة المرور" required>
                <i class="fa-solid fa-lock"></i>
            </div>
            
            <button type="submit" class="btn-login">
                <span data-i18n="login_btn">دخول النظام</span> <i class="fa-solid fa-arrow-left"></i>
            </button>
        </form>

        <div class="personas-container">
            <span class="personas-title" data-i18n="demo_label">اختر دوراً لتجربة النظام (Live Demo)</span>
            <div class="roles-grid">
                <div class="role-btn" onclick="Auth.fillDemo('board')"><i class="fa-solid fa-gavel"></i><span data-i18n="role_board">رئيس المجلس</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('secretary')"><i class="fa-solid fa-file-signature"></i><span data-i18n="role_sec">أمين السر</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('ceo')"><i class="fa-solid fa-user-tie"></i><span data-i18n="role_ceo">الرئيس التنفيذي</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('shareholder')"><i class="fa-solid fa-users-viewfinder"></i><span data-i18n="role_share">المساهمين</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('cfo')"><i class="fa-solid fa-coins"></i><span data-i18n="role_cfo">المالية</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('hr')"><i class="fa-solid fa-users"></i><span data-i18n="role_hr">الموارد</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('cto')"><i class="fa-solid fa-laptop-code"></i><span data-i18n="role_it">التقنية</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('sales')"><i class="fa-solid fa-chart-line"></i><span data-i18n="role_sales">المبيعات</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('audit')"><i class="fa-solid fa-magnifying-glass"></i><span data-i18n="role_audit">التدقيق</span></div>
                <div class="role-btn" onclick="Auth.fillDemo('admin')"><i class="fa-solid fa-shield-halved"></i><span data-i18n="role_admin">مسؤول النظام</span></div>
            </div>
        </div>

        <div class="legal-footer">
            <span><i class="fa-solid fa-certificate" style="color: var(--mint-green);"></i> CR: 7050139125</span>
            <span><i class="fa-solid fa-receipt" style="color: var(--mint-green);"></i> VAT: 3130161102</span>
        </div>
    </div>

    <script src="assets/js/core/config.js"></script>
    <script src="assets/js/core/auth.js"></script>

    <script>
        /* --- سكربت الترجمة والوظائف الداخلية --- */        
        const DICTIONARY = {
            ar: {
                brand: "eGov Portal", portal_desc: "نظام الحوكمة الرقمية والامتثال المؤسسي",
                email_placeholder: "البريد الإلكتروني المهني", pass_placeholder: "كلمة المرور",
                login_btn: "دخول النظام", demo_label: "اختر دوراً لتجربة النظام (Live Demo)",
                role_board: "رئيس المجلس", role_sec: "أمين السر", role_ceo: "الرئيس التنفيذي",
                role_cfo: "المالية", role_hr: "الموارد", role_it: "التقنية",
                role_sales: "المبيعات", role_audit: "التدقيق", role_share: "المساهمين",
                role_admin: "مسؤول النظام"
            },
            en: {
                brand: "eGov Portal", portal_desc: "Digital Governance & Corporate Compliance System",
                email_placeholder: "Professional Email", pass_placeholder: "Password",
                login_btn: "Secure Login", demo_label: "Select a Persona for Live Demo",
                role_board: "Chairman", role_sec: "Secretary", role_ceo: "CEO",
                role_cfo: "CFO", role_hr: "HR Manager", role_it: "IT Manager",
                role_sales: "Sales", role_audit: "Internal Audit", role_share: "Shareholder",
                role_admin: "System Admin"
            }
        };

        const I18n = {
            currentLang: localStorage.getItem('lang') || 'ar',
            
            init: function() {
                document.documentElement.setAttribute('lang', this.currentLang);
                document.documentElement.setAttribute('dir', this.currentLang === 'ar' ? 'rtl' : 'ltr');
                const btn = document.getElementById('langText');
                if(btn) btn.innerText = this.currentLang === 'ar' ? 'EN' : 'عربي';

                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    const text = DICTIONARY[this.currentLang][key] || key;
                    if (el.tagName === 'INPUT') el.placeholder = text;
                    else el.innerHTML = text;
                });
            },

            toggleLang: function() {
                this.currentLang = this.currentLang === 'ar' ? 'en' : 'ar';
                localStorage.setItem('lang', this.currentLang);
                this.init();
            }
        };

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            Auth.login(email, pass);
        }

        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('themeIcon');
            const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            icon.className = next === 'dark' ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            const icon = document.getElementById('themeIcon');
            if(icon) icon.className = savedTheme === 'dark' ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
            I18n.init();
        });
    </script>
</body>
</html>
