const DICTIONARY = {
    ar: {
        // --- الهوية وتسجيل الدخول ---
        brand: "eCode",
        portal_desc: "نظام الحوكمة الرقمية والامتثال المؤسسي",
        email_placeholder: "البريد الإلكتروني المهني",
        pass_placeholder: "كلمة المرور",
        login_btn: "تسجيل الدخول الآمن",
        demo_label: "✨ اختر شخصية لتجربة النظام لتجربة مباشرة:",
        copyright: "© 2026 شركة إلكترونيك كود. جميع الحقوق محفوظة.",

        // --- الأدوار الوظيفية ---
        role_board: "رئيس المجلس",
        role_sec: "أمين السر",
        role_ceo: "الرئيس التنفيذي",
        role_cfo: "المدير المالي",
        role_hr: "مدير الموارد",
        role_it: "المدير التقني",
        role_sales: "مدير المبيعات",
        role_audit: "التدقيق الداخلي",
        role_share: "مساهم",
        role_admin: "مدير النظام",

        // --- الأقسام والإدارات ---
        dept_top_mgmt: "الإدارة العليا",
        dept_board: "مجلس الإدارة",
        dept_it: "تقنية المعلومات",
        dept_tech_dev: "التقنية والتطوير",
        dept_finance: "الإدارة المالية",
        dept_support: "الخدمات المساندة",
        dept_sales: "المبيعات",
        dept_audit: "المراجعة والتدقيق",
        dept_secretariat: "أمانة المجلس",
        dept_shareholders: "المساهمين",
        tab_users: "إدارة المستخدمين",
        tab_roles: "هيكل الصلاحيات",

        // --- القوائم الجانبية ---
        menu_dashboard: "لوحة القيادة",
        menu_users: "إدارة المستخدمين",
        menu_audit_logs: "سجلات التدقيق",
        menu_settings: "إعدادات النظام",
        menu_profile: "الملف الشخصي",
        menu_board_summary: "ملخص المجلس",
        menu_meetings: "الاجتماعات",
        menu_decisions: "القرارات",
        menu_overview: "نظرة عامة",
        menu_strategy: "الاستراتيجية",
        menu_finance_rep: "التقارير المالية",
        menu_circulars: "التعاميم",
        menu_employees: "الموظفين",
        menu_payroll: "الرواتب",
        menu_attendance: "الحضور",
        menu_recruitment: "الطلبات والتوظيف",
        menu_finance_center: "المركز المالي",
        menu_invoices: "الفواتير",
        menu_budget: "الميزانية",
        menu_zakat: "الزكاة والضريبة",
        menu_systems: "حالة الأنظمة",
        menu_support: "الدعم الفني",
        menu_assets: "الأصول التقنية",
        menu_security: "الأمن السيبراني",
        menu_sales: "المبيعات",
        menu_crm: "العملاء (CRM)",
        menu_targets: "الأهداف",
        menu_contracts: "العقود",
        menu_audit_plan: "خطة التدقيق",
        menu_risks: "المخاطر",
        menu_compliance: "الامتثال",
        menu_sessions: "إدارة الجلسات",
        menu_minutes: "سجل المحاضر",
        menu_tasks: "التوصيات",
        menu_wallet: "محفظتي",
        menu_dividends: "الأرباح",
        menu_reports: "التقارير",
        menu_voting: "التصويت",

        // --- محتوى لوحة القيادة ---
        compliance_index: "مؤشر الامتثال العام",
        active_users: "مستخدم نشط",
        all_working: "الكل يعمل",
        critical_alerts: "تنبيهات حرجة",
        review_needed: "يرجى المراجعة",
        system_status: "حالة الأنظمة",
        recent_activities: "آخر النشاطات",
        task_budget_approval: "اعتماد الميزانية",
        task_policy_update: "تحديث سياسة الإجازات",
        status_completed: "مكتمل",
        status_pending: "قيد المراجعة",
        compliance_status: "حالة الامتثال",
        gov_rating: "تصنيف الحوكمة: ممتاز",

        // --- صفحة البروفايل المحدثة ---
        profName: "المستخدم",
        GRCO: "ايمن المغربي",
        profRole: "مدير النظام",
        reqLeave: "طلب إجازة",
        reqLetter: "تعريف راتب",
        financialData: "البيانات المالية",
        basicSalary: "الراتب الأساسي",
        housing: "بدل سكن",
        transport: "بدل نقل",
        netSalary: "صافي الراتب",
        
        // معلومات الهوية
        lbl_id: "الرقم الوظيفي:",
        lbl_dept: "الإدارة:",
        val_dept: "التقنية والابتكار",

        // الأداء والمهارات
        lbl_performance: "الأداء السنوي",
        skill_leadership: "القيادة وإدارة الفرق",
        skill_tech: "الكفاءة التقنية",
        skill_comm: "التواصل الفعال",

        // الصلاحيات
        lbl_permissions: "صلاحيات النظام",
        perm_full_access: "دخول كامل للنظام",
        perm_approve: "اعتماد الطلبات",
        perm_reports: "تصدير التقارير",
        perm_users: "إدارة المستخدمين",

        // النوافذ المنبثقة
        lbl_leave_type: "نوع الإجازة",
        opt_annual: "سنوية",
        opt_sick: "مرضية",
        opt_emergency: "اضطرارية",
        lbl_from: "من تاريخ",
        lbl_to: "إلى تاريخ",
        lbl_attachment: "المرفقات (تقرير طبي / أخرى)",
        txt_upload_hint: "اضغط لرفع الملف أو اسحبه هنا",
        
        lbl_entity: "الجهة الموجه إليها",
        lbl_lang: "اللغة",
        lang_ar: "عربي",
        lang_en: "إنجليزي",
        
        btn_cancel: "إلغاء",
        btn_submit: "إرسال الطلب",
        btn_print: "إصدار وطباعة",

        // --- سجل الطلبات والحضور ---
        lbl_requests_log: "سجل الطلبات",
        lbl_total: "الإجمالي",
        col_req_no: "رقم الطلب",
        col_type: "النوع",
        col_date: "التاريخ",
        col_status: "الحالة",
        val_annual_leave: "إجازة سنوية",
        val_salary_letter: "خطاب تعريف راتب",
        status_approved: "معتمد",
        status_pending: "تحت الإجراء",
        attendance: "الحضور",
        lbl_discipline: "انضباط",
        day_sun: "الأحد", day_mon: "الاثنين", day_tue: "الثلاثاء", day_wed: "الأربعاء", day_thu: "الخميس",
        status_ontime: "حضور مبكر",
        status_late: "تأخير بسيط",
        val_sick_leave: "إجازة مرضية",
        val_petty_cash: "طلب عهدة مالية",
        val_training_req: "دورة تدريبية",
        val_equipment_req: "طلب أجهزة",
        val_clearance: "إخلاء طرف",
        status_rejected: "مرفوض",
        status_new: "جديد",
        status_hold: "معلق",

        // --- صفحة الإعدادات ---
        pageTitle: "إعدادات النظام",
        pageDesc: "التحكم في الهوية، الاشتراكات، الأمان، والتفضيلات العامة.",
        btnSave: "حفظ التغييرات",
        secBranding: "الهوية البصرية",
        lblProfilePic: "الصورة الشخصية",
        lblCompLogo: "شعار الشركة",
        lblPrimaryColor: "اللون الأساسي",
        lblSecColor: "اللون الثانوي",
        secContact: "بيانات التواصل",
        lblEmailMain: "البريد الإلكتروني (الأساسي)",
        lblEmailBackup: "البريد الاحتياطي",
        lblPhone: "رقم الجوال",
        lblPlan: "الباقة الحالية",
        btnUpgrade: "ترقية الباقة",
        lblUsers: "المستخدمين",
        lblStorage: "التخزين",
        lblRenew: "تاريخ التجديد:",
        secDomain: "إعدادات النطاق",
        lblCustomDomain: "النطاق المخصص",
        statusConnected: "متصل",
        lblCNAME: "سجل CNAME يشير إلى:",
        lblMaintMode: "وضع الصيانة",
        lblMaintDesc: "إيقاف النظام مؤقتاً",
        secCompany: "تفاصيل المنشأة",
        lblCompName: "اسم المنشأة",
        lblUnified: "الرقم الموحد (700)",
        lblCR: "السجل التجاري",
        secSecurity: "الأمان",
        lblNewPass: "كلمة المرور الجديدة",
        lblConfirmPass: "تأكيد كلمة المرور",
        btnUpdatePass: "تحديث كلمة المرور",
        lbl2FA: "المصادقة الثنائية (2FA)",
        secPrefs: "التفضيلات",
        prefLang: "اللغة",
        prefTheme: "المظهر",

        // --- صفحة المستخدمين ---
        lbl_total_users: "إجمالي المستخدمين",
        lbl_active_users: "نشط حالياً",
        lbl_admins: "مدراء النظام",
        lbl_blocked: "محظورين",
        ph_search_users: "بحث بالاسم أو البريد...",
        btn_add_user: "مستخدم جديد",
        col_user: "المستخدم",
        col_role: "الدور الوظيفي",
        col_dept: "القسم",
        col_join_date: "تاريخ الانضمام",
        col_status: "الحالة",
        col_actions: "إجراءات",
        status_active: "نشط",
        status_inactive: "خامل",
        
        // نافذة الإضافة
        modal_add_user_title: "إضافة مستخدم جديد",
        lbl_first_name: "الاسم الأول",
        lbl_last_name: "اسم العائلة",
        lbl_email: "البريد الإلكتروني",
        lbl_role: "الدور الوظيفي",
        lbl_dept: "القسم",
        btn_save: "حفظ",

        // --- صفحة إدارة المستخدمين ---
        lbl_total_users: "إجمالي المستخدمين",
        lbl_active_users: "نشط حالياً",
        lbl_admins: "مدراء النظام",
        lbl_blocked: "محظورين",
        ph_search_users: "بحث بالاسم، الدور، أو البريد...",
        btn_add_user: "مستخدم جديد",
        
        // أعمدة الجدول
        col_user: "المستخدم",
        col_role: "الدور الوظيفي",
        col_dept: "القسم",
        col_join_date: "تاريخ الانضمام",
        col_status: "الحالة",
        col_actions: "إجراءات",
        
        // حالات المستخدم
        status_active: "نشط",
        status_inactive: "خامل",
        
        // نافذة إضافة مستخدم
        modal_add_user_title: "إضافة مستخدم جديد",
        lbl_first_name: "الاسم الأول",
        lbl_last_name: "اسم العائلة",
        lbl_email: "البريد الإلكتروني",
        lbl_role: "الدور الوظيفي",
        lbl_dept: "القسم",
        btn_save: "حفظ",
        btn_cancel: "إلغاء",

        // --- أسماء المستخدمين ---
        name_mutaz: "معتز سعود",
        name_ali: "علي ابراهيم",
        name_ayman: "أيمن المغربي",
        name_abdulaziz: "عبدالعزيز سلطان",
        name_ibrahim: "ابراهيم اياد",
        name_ahmed: "احمد عبد القادر",
        name_amjad: "امجاد علي",
        name_inas: "ايناس الطيب",
        name_amal: "امل خالد",
        name_maymouna: "ميمونه فاروق",
        name_osama: "اسامه الجنيدي",

        // --- الأوصاف الوظيفية ---
        desc_moataz: "نائب رئيس المجلس (15%)",
        desc_ali: "مساهم (10%)",
        desc_ayman: "مسؤول الحوكمة - مساهم (50%)",
        desc_share_10: "حصة (10%)",
        desc_share_15: "حصة (15%)",
        

        // --- عام ---
        welcome: "مرحباً بك",
        logout: "تسجيل الخروج",
        notifications: "الإشعارات"
    },

    en: {
        // --- Portal / Login ---
        brand: "eCode",
        portal_desc: "Digital Governance & Corporate Compliance System",
        email_placeholder: "Professional Email",
        pass_placeholder: "Password",
        login_btn: "Secure Login",
        demo_label: "✨ Select a Persona for Live Demo:",
        copyright: "© 2026 Electronic Code Co. All Rights Reserved.",

        // --- Roles ---
        role_board: "Chairman",
        role_sec: "Secretary",
        role_ceo: "CEO",
        role_cfo: "CFO",
        role_hr: "HR Manager",
        role_it: "CTO",
        role_sales: "Sales Manager",
        role_audit: "Internal Audit",
        role_share: "Shareholder",
        role_admin: "System Admin",

        // --- Departments ---
        dept_top_mgmt: "Top Management",
        dept_board: "Board of Directors",
        dept_it: "IT Department",
        dept_tech_dev: "Tech & Development",
        dept_finance: "Finance Dept",
        dept_support: "Support Services",
        dept_sales: "Sales Dept",
        dept_audit: "Audit & Review",
        dept_secretariat: "Secretariat",
        dept_shareholders: "Shareholders",
        tab_users: "User Management",
        tab_roles: "Permissions Structure",

        // --- Sidebar Menus ---
        menu_dashboard: "Dashboard",
        menu_users: "User Management",
        menu_audit_logs: "Audit Logs",
        menu_settings: "System Settings",
        menu_profile: "My Profile",
        menu_board_summary: "Board Summary",
        menu_meetings: "Meetings",
        menu_decisions: "Decisions",
        menu_overview: "Overview",
        menu_strategy: "Strategy",
        menu_finance_rep: "Financial Reports",
        menu_circulars: "Circulars",
        menu_employees: "Employees",
        menu_payroll: "Payroll",
        menu_attendance: "Attendance",
        menu_recruitment: "Recruitment",
        menu_finance_center: "Financial Center",
        menu_invoices: "Invoices",
        menu_budget: "Budget",
        menu_zakat: "Zakat & Tax",
        menu_systems: "System Status",
        menu_support: "Tech Support",
        menu_assets: "IT Assets",
        menu_security: "Cybersecurity",
        menu_sales: "Sales",
        menu_crm: "Clients (CRM)",
        menu_targets: "Targets",
        menu_contracts: "Contracts",
        menu_audit_plan: "Audit Plan",
        menu_risks: "Risks",
        menu_compliance: "Compliance",
        menu_sessions: "Session Mgmt",
        menu_minutes: "Minutes Registry",
        menu_tasks: "Recommendations",
        menu_wallet: "My Wallet",
        menu_dividends: "Dividends",
        menu_reports: "Reports",
        menu_voting: "Voting",

        // --- Dashboard Content ---
        compliance_index: "General Compliance Index",
        active_users: "Active Users",
        all_working: "All Operational",
        critical_alerts: "Critical Alerts",
        review_needed: "Action Required",
        system_status: "System Status",
        recent_activities: "Recent Activities",
        task_budget_approval: "Budget Approval",
        task_policy_update: "Leave Policy Update",
        status_completed: "Completed",
        status_pending: "Pending Review",
        compliance_status: "Compliance Status",
        gov_rating: "Governance Rating: Excellent",

        // --- Advanced Profile ---
        profName: "User",
        GRCO: "Ayman Al-Maghrabi",
        profRole: "System Admin",
        reqLeave: "Leave Request",
        reqLetter: "Salary Letter",
        financialData: "Financial Data",
        basicSalary: "Basic Salary",
        housing: "Housing",
        transport: "Transport",
        netSalary: "Net Salary",

        // Identity Info
        lbl_id: "Employee ID:",
        lbl_dept: "Department:",
        val_dept: "Tech & Innovation",

        // Performance & Skills
        lbl_performance: "Annual Performance",
        skill_leadership: "Leadership",
        skill_tech: "Technical Competence",
        skill_comm: "Communication",

        // Permissions
        lbl_permissions: "System Permissions",
        perm_full_access: "Full System Access",
        perm_approve: "Approvals",
        perm_reports: "Export Reports",
        perm_users: "User Mgmt",

        // Modals
        lbl_leave_type: "Leave Type",
        opt_annual: "Annual",
        opt_sick: "Sick Leave",
        opt_emergency: "Emergency",
        lbl_from: "From Date",
        lbl_to: "To Date",
        lbl_attachment: "Attachments (Medical Report / Other)",
        txt_upload_hint: "Click to upload or drag file here",
        lbl_entity: "Directed To",
        lbl_lang: "Language",
        lang_ar: "Arabic",
        lang_en: "English",
        btn_cancel: "Cancel",
        btn_submit: "Submit Request",
        btn_print: "Issue & Print",
        val_sick_leave: "Sick Leave",
        val_petty_cash: "Petty Cash",
        val_training_req: "Training Course",
        val_equipment_req: "Equipment Request",
        val_clearance: "Clearance",
        status_rejected: "Rejected",
        status_new: "New",
        status_hold: "On Hold",

        // --- Requests & Attendance ---
        lbl_requests_log: "Requests Log",
        lbl_total: "Total",
        col_req_no: "Req No",
        col_type: "Type",
        col_date: "Date",
        col_status: "Status",
        val_annual_leave: "Annual Leave",
        val_salary_letter: "Salary Letter",
        status_approved: "Approved",
        status_pending: "Pending",
        attendance: "Attendance",
        
        lbl_discipline: "Discipline",
        day_sun: "Sun", day_mon: "Mon", day_tue: "Tue", day_wed: "Wed", day_thu: "Thu",
        status_ontime: "On Time",
        status_late: "Late",

        // --- Settings Page ---
        pageTitle: "System Settings",
        pageDesc: "Control Identity, Subscription, Security & Preferences.",
        btnSave: "Save Changes",
        secBranding: "Branding",
        lblProfilePic: "Profile Picture",
        lblCompLogo: "Company Logo",
        lblPrimaryColor: "Primary Color",
        lblSecColor: "Secondary Color",
        secContact: "Contact Info",
        lblEmailMain: "Primary Email",
        lblEmailBackup: "Backup Email",
        lblPhone: "Phone Number",
        lblPlan: "Current Plan",
        btnUpgrade: "Upgrade Plan",
        lblUsers: "Users",
        lblStorage: "Storage",
        lblRenew: "Renewal Date:",
        secDomain: "Domain Settings",
        lblCustomDomain: "Custom Domain",
        statusConnected: "Connected",
        lblCNAME: "CNAME Record:",
        lblMaintMode: "Maintenance Mode",
        lblMaintDesc: "Temporarily disable system",
        secCompany: "Company Details",
        lblCompName: "Company Name",
        lblUnified: "Unified Number (700)",
        lblCR: "CR Number",
        secSecurity: "Security",
        lblNewPass: "New Password",
        lblConfirmPass: "Confirm Password",
        btnUpdatePass: "Update Password",
        lbl2FA: "Two-Factor Auth (2FA)",
        secPrefs: "Preferences",
        prefLang: "Language",
        prefTheme: "Theme",

        // --- Users Page ---
        lbl_total_users: "Total Users",
        lbl_active_users: "Active Now",
        lbl_admins: "Admins",
        lbl_blocked: "Blocked",
        ph_search_users: "Search name or email...",
        btn_add_user: "New User",
        col_user: "User",
        col_role: "Role",
        col_dept: "Department",
        col_join_date: "Join Date",
        col_status: "Status",
        col_actions: "Actions",
        status_active: "Active",
        status_inactive: "Inactive",
        
        modal_add_user_title: "Add New User",
        lbl_first_name: "First Name",
        lbl_last_name: "Last Name",
        lbl_email: "Email Address",
        lbl_role: "Role",
        lbl_dept: "Department",
        btn_save: "Save",

        // --- Users Management Page ---
        lbl_total_users: "Total Users",
        lbl_active_users: "Active Now",
        lbl_admins: "Admins",
        lbl_blocked: "Blocked",
        ph_search_users: "Search name, role, or email...",
        btn_add_user: "New User",
        
        // Table Columns
        col_user: "User",
        col_role: "Role",
        col_dept: "Department",
        col_join_date: "Join Date",
        col_status: "Status",
        col_actions: "Actions",
        
        // User Status
        status_active: "Active",
        status_inactive: "Inactive",
        
        // Add User Modal
        modal_add_user_title: "Add New User",
        lbl_first_name: "First Name",
        lbl_last_name: "Last Name",
        lbl_email: "Email Address",
        lbl_role: "Role",
        lbl_dept: "Department",
        btn_save: "Save",
        btn_cancel: "Cancel",

        // --- User Names ---
        name_mutaz: "Mutaz Saud",
        name_ali: "Ali Ibrahim",
        name_ayman: "Ayman Al-Maghrabi",
        name_abdulaziz: "Abdulaziz Sultan",
        name_ibrahim: "Ibrahim Iyad",
        name_ahmed: "Ahmed Abdulqader",
        name_amjad: "Amjad Ali",
        name_inas: "Inas Al-Tayeb",
        name_amal: "Amal Khalid",
        name_maymouna: "Maymouna Farouk",
        name_osama: "Osama Al-Junaidi",

        // --- Role Descriptions ---
        desc_moataz: "Vice Chairman (15%)",
        desc_ali: "Shareholder (10%)",
        desc_ayman: "GRC Officer - Shareholder (50%)",
        desc_share_10: "Share (10%)",
        desc_share_15: "Share (15%)",

        // --- General ---
        welcome: "Welcome",
        logout: "Logout",
        notifications: "Notifications"
    }
};

const I18n = {
    currentLang: localStorage.getItem('lang') || 'ar',

    init: function() {
        // 1. تطبيق اللغة والاتجاه على الصفحة
        document.documentElement.setAttribute('lang', this.currentLang);
        document.documentElement.setAttribute('dir', this.currentLang === 'ar' ? 'rtl' : 'ltr');
        
        // 2. تحديث نص زر اللغة في الشريط العلوي
        const btn = document.getElementById('langText');
        if(btn) btn.innerText = this.currentLang === 'ar' ? 'EN' : 'عربي';

        // 3. تحديث النصوص داخل الصفحة
        this.updateContent();
    },

    toggleLang: function() {
        this.currentLang = this.currentLang === 'ar' ? 'en' : 'ar';
        localStorage.setItem('lang', this.currentLang);
        
        // إعادة تحميل الصفحة لضمان تطبيق التغييرات على المخطط (Layout)
        location.reload(); 
    },

    t: function(key) {
        // جلب النص من القاموس، أو إرجاع المفتاح نفسه إذا لم يوجد
        return DICTIONARY[this.currentLang][key] || key;
    },

    updateContent: function() {
        // البحث عن كل العناصر التي لديها سمة data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const text = this.t(key);
            
            // التعامل مع المدخلات (placeholder) والعناصر العادية
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = text;
            } else {
                el.innerHTML = text;
            }
        });
    }
};

// تشغيل النظام عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', () => I18n.init());
