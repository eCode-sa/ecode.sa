<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملفي الشخصي | eGov Admin</title>
    <style>
        /* --- تنسيقات الهيكل الأساسي --- */
        .dashboard-content {
            padding: 30px;
            padding-bottom: 100px; /* مساحة إضافية للسكرول */
            overflow-y: visible !important; /* ضمان ظهور السكرول */
            height: auto !important;
        }

        /* --- بطاقة الهوية (Header) --- */
        .profile-card {
            background: var(--bg-secondary); border-radius: 20px; border: 1px solid var(--border-color);
            margin-bottom: 25px; overflow: hidden; position: relative;
        }
        .profile-header-bg {
            background: linear-gradient(135deg, var(--lavender-dark), var(--sky-blue));
            height: 160px; width: 100%;
        }
        .profile-body {
            padding: 20px 30px 30px; display: flex; align-items: flex-end; gap: 25px; flex-wrap: wrap;
        }
        .avatar-box {
            width: 140px; height: 140px; border-radius: 24px; border: 5px solid var(--bg-secondary);
            background: var(--bg-secondary); overflow: hidden; margin-top: -70px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); position: relative;
        }
        .avatar-box img { width: 100%; height: 100%; object-fit: contain; padding: 10px; background: #fff; }
        
        .profile-info { flex: 1; min-width: 250px; }
        .profile-info h1 { 
            font-size: 26px; margin: 0 0 8px; color: var(--text-primary); 
            display: flex; align-items: center; gap: 10px; 
        }
        .verified-badge { color: var(--sky-blue); font-size: 20px; }
        .role-text { color: var(--lavender-light); font-size: 14px; font-weight: bold; margin: 0; }

        .meta-tags { display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        .meta-tag {
            background: var(--bg-elevated); border: 1px solid var(--border-color);
            color: var(--text-secondary); padding: 6px 14px; border-radius: 30px;
            font-size: 12px; display: flex; align-items: center; gap: 6px;
        }
        .meta-tag i { color: var(--lavender-dark); }

        .profile-actions { display: flex; gap: 12px; margin-bottom: 10px; }
        .btn-action {
            padding: 12px 24px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; gap: 8px; font-size: 13px; transition: all 0.3s;
        }
        .btn-action:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .btn-primary { background: var(--lavender-dark); color: #fff; }
        .btn-outline { background: transparent; border: 1px solid var(--border-color); color: var(--text-primary); }

        /* --- الشبكة الذكية (Grid System) --- */
        .smart-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px;
        }

        /* --- البطاقات العامة --- */
        .info-card {
            background: var(--bg-secondary); border: 1px solid var(--border-color); 
            border-radius: 20px; padding: 25px; height: 100%;
            transition: 0.3s; display: flex; flex-direction: column;
        }
        .info-card:hover { border-color: var(--lavender-dark); }
        
        .card-header { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); 
        }
        .card-title { font-size: 16px; font-weight: bold; color: var(--text-primary); display: flex; align-items: center; gap: 10px; }
        
        /* --- قسم البيانات المالية --- */
        .finance-card { background: linear-gradient(145deg, #1e293b, #0f172a); border: 1px solid #334155; color: #fff; }
        .salary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .salary-item span { display: block; font-size: 12px; color: #94a3b8; margin-bottom: 5px; }
        .salary-val { font-size: 18px; font-family: monospace; font-weight: bold; }
        .salary-val.blur { filter: blur(8px); cursor: pointer; user-select: none; }
        .net-salary { color: var(--mint-green); font-size: 22px; }

        /* --- قسم المهارات والأداء --- */
        .skill-item { margin-bottom: 15px; }
        .skill-label { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 5px; color: var(--text-secondary); }
        .progress-bar { height: 8px; background: var(--bg-elevated); border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--lavender-dark); border-radius: 10px; }

        /* --- قسم رفع الملفات (جديد) --- */
        .upload-area {
            border: 2px dashed var(--border-color); border-radius: 12px;
            padding: 30px; text-align: center; cursor: pointer; transition: 0.3s;
            background: var(--bg-primary); margin-top: 10px;
        }
        .upload-area:hover { border-color: var(--lavender-dark); background: var(--bg-elevated); }
        .upload-icon { font-size: 24px; color: var(--text-secondary); margin-bottom: 10px; }
        .upload-text { font-size: 13px; color: var(--text-muted); }

        /* --- النوافذ المنبثقة --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
            z-index: 9999; display: none; align-items: center; justify-content: center;
        }
        .modal-box {
            background: var(--bg-secondary); width: 500px; border-radius: 20px;
            padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-size: 13px; color: var(--text-secondary); }
        .form-input { 
            width: 100%; padding: 12px; background: var(--bg-primary); 
            border: 1px solid var(--border-color); border-radius: 10px; 
            color: var(--text-primary); outline: none; transition: 0.3s;
        }
        .form-input:focus { border-color: var(--lavender-dark); }
        
        /* استجابة للجوال */
        @media (max-width: 768px) {
            .profile-body { text-align: center; justify-content: center; }
            .avatar-box { margin: -70px auto 0; }
            .profile-actions { width: 100%; justify-content: center; }
            .meta-tags { justify-content: center; }
        }
    </style>
</head>
<body>

    <div class="dashboard-content">
        
        <div class="profile-card">
            <div class="profile-header-bg"></div>
            <div class="profile-body">
                <div class="avatar-box">
                    <img src="../../favicon.png" alt="Avatar">
                </div>
                
                <div class="profile-info">
                    <h1>
                        <span data-i18n="profName">المستخدم</span> 
                        <i class="fas fa-certificate verified-badge" title="Verified Employee"></i>
                    </h1>
                    <p class="role-text" data-i18n="profRole">مدير النظام</p>
                    
                    <div class="meta-tags">
                        <div class="meta-tag"><i class="fas fa-fingerprint"></i> <span data-i18n="lbl_id">الرقم الوظيفي:</span> 10245</div>
                        <div class="meta-tag"><i class="fas fa-envelope"></i> admin@ecode.sa</div>
                        <div class="meta-tag"><i class="fas fa-sitemap"></i> <span data-i18n="lbl_dept">الإدارة:</span> <span data-i18n="val_dept">التقنية</span></div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="btn-action btn-primary" onclick="openModal('leaveModal')">
                        <i class="fas fa-plus-circle"></i> <span data-i18n="reqLeave">طلب إجازة</span>
                    </button>
                    <button class="btn-action btn-outline" onclick="openModal('letterModal')">
                        <i class="fas fa-file-alt"></i> <span data-i18n="reqLetter">تعريف راتب</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="smart-grid">
            
            <div class="info-card finance-card">
                <div class="card-header" style="border-color: #334155;">
                    <div class="card-title"><i class="fas fa-wallet" style="color: var(--coral-pink);"></i> <span data-i18n="financialData">البيانات المالية</span></div>
                    <button onclick="toggleSalary()" style="background: rgba(255,255,255,0.1); border:none; color:#fff; padding:5px 10px; border-radius:5px; cursor:pointer;">
                        <i class="fas fa-eye" id="salaryIcon"></i>
                    </button>
                </div>
                <div class="salary-grid">
                    <div class="salary-item">
                        <span data-i18n="basicSalary">الراتب الأساسي</span>
                        <div class="salary-val blur">9,500 SAR</div>
                    </div>
                    <div class="salary-item">
                        <span data-i18n="housing">بدل سكن</span>
                        <div class="salary-val blur">2,375 SAR</div>
                    </div>
                    <div class="salary-item">
                        <span data-i18n="transport">بدل نقل</span>
                        <div class="salary-val blur">950 SAR</div>
                    </div>
                    <div class="salary-item">
                        <span data-i18n="netSalary" style="color:var(--mint-green)">صافي الراتب</span>
                        <div class="salary-val blur net-salary">12,825 SAR</div>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-chart-line" style="color: var(--sky-blue);"></i> <span data-i18n="lbl_performance">الأداء السنوي</span></div>
                    <span style="font-size:12px; color:var(--mint-green); font-weight:bold;">4.8/5.0</span>
                </div>
                <div style="margin-bottom: 20px;">
                    <div class="skill-item">
                        <div class="skill-label"><span data-i18n="skill_leadership">القيادة</span> <span>90%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 90%;"></div></div>
                    </div>
                    <div class="skill-item">
                        <div class="skill-label"><span data-i18n="skill_tech">الكفاءة التقنية</span> <span>95%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 95%; background: var(--mint-green);"></div></div>
                    </div>
                    <div class="skill-item">
                        <div class="skill-label"><span data-i18n="skill_comm">التواصل</span> <span>85%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 85%; background: var(--soft-orange);"></div></div>
                    </div>
                </div>
            </div>

            <div class="info-card" style="grid-column: 1 / -1;">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-shield-alt" style="color: var(--lavender-light);"></i> <span data-i18n="lbl_permissions">صلاحيات النظام</span></div>
                </div>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <span class="meta-tag"><i class="fas fa-check text-success"></i> <span data-i18n="perm_full_access">دخول كامل للنظام</span></span>
                    <span class="meta-tag"><i class="fas fa-check text-success"></i> <span data-i18n="perm_approve">اعتماد الطلبات</span></span>
                    <span class="meta-tag"><i class="fas fa-check text-success"></i> <span data-i18n="perm_reports">استخراج التقارير</span></span>
                    <span class="meta-tag"><i class="fas fa-check text-success"></i> <span data-i18n="perm_users">إدارة المستخدمين</span></span>
                </div>
            </div>

        </div>
    </div>

    <div id="leaveModal" class="modal-overlay" onclick="closeModalOnOutside(event, 'leaveModal')">
        <div class="modal-box">
            <h2 style="margin-top:0; color:var(--text-primary); margin-bottom:20px;" data-i18n="reqLeave">طلب إجازة جديدة</h2>
            
            <div class="form-group">
                <label class="form-label" data-i18n="lbl_leave_type">نوع الإجازة</label>
                <select class="form-input">
                    <option data-i18n="opt_annual">سنوية</option>
                    <option data-i18n="opt_sick">مرضية</option>
                    <option data-i18n="opt_emergency">اضطرارية</option>
                </select>
            </div>

            <div style="display: flex; gap: 15px;">
                <div class="form-group" style="flex:1">
                    <label class="form-label" data-i18n="lbl_from">من تاريخ</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-group" style="flex:1">
                    <label class="form-label" data-i18n="lbl_to">إلى تاريخ</label>
                    <input type="date" class="form-input">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" data-i18n="lbl_attachment">المرفقات (تقرير طبي / أخرى)</label>
                <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <div class="upload-text" data-i18n="txt_upload_hint">اضغط هنا لرفع الملف أو اسحبه للإفلات</div>
                    <input type="file" id="fileInput" style="display: none;">
                </div>
            </div>

            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px;">
                <button class="btn-action btn-outline" onclick="closeModal('leaveModal')" data-i18n="btn_cancel">إلغاء</button>
                <button class="btn-action btn-primary" onclick="alert('تم رفع الطلب والمرفقات بنجاح!')" data-i18n="btn_submit">إرسال الطلب</button>
            </div>
        </div>
    </div>

    <div id="letterModal" class="modal-overlay" onclick="closeModalOnOutside(event, 'letterModal')">
        <div class="modal-box">
            <h2 style="margin-top:0; color:var(--text-primary); margin-bottom:20px;" data-i18n="reqLetter">طلب تعريف راتب</h2>
            <div class="form-group">
                <label class="form-label" data-i18n="lbl_entity">الجهة الموجه إليها</label>
                <input type="text" class="form-input" placeholder="...">
            </div>
            <div class="form-group">
                <label class="form-label" data-i18n="lbl_lang">اللغة</label>
                <select class="form-input">
                    <option data-i18n="lang_ar">عربي</option>
                    <option data-i18n="lang_en">إنجليزي</option>
                </select>
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px;">
                <button class="btn-action btn-outline" onclick="closeModal('letterModal')" data-i18n="btn_cancel">إلغاء</button>
                <button class="btn-action btn-primary" onclick="alert('تم إصدار التعريف!')" data-i18n="btn_print">إصدار وطباعة</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/system.js"></script>
    <script>
        function toggleSalary() {
            const vals = document.querySelectorAll('.salary-val');
            const icon = document.getElementById('salaryIcon');
            let hidden = vals[0].classList.contains('blur');
            
            vals.forEach(v => v.classList.toggle('blur'));
            icon.className = hidden ? 'fas fa-eye-slash' : 'fas fa-eye';
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function closeModalOnOutside(e, id) { if(e.target.id === id) closeModal(id); }
    </script>
</body>
</html>
