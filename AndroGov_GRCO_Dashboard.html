<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AndroGov | مركز قيادة الحوكمة</title>
    
    <!-- Fonts: Tajawal for Arabic Identity -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        androRed: '#FB4747',
                        androBlue: '#4267B2',
                        androDark: '#1e293b',
                        androGray: '#F8FAFC',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                    },
                    fontFamily: {
                        sans: ['Tajawal', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #F3F4F6; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .sidebar-item:hover { background-color: #FEF2F2; color: #FB4747; border-right: 4px solid #FB4747; }
        .sidebar-item.active { background-color: #FEF2F2; color: #FB4747; border-right: 4px solid #FB4747; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .ai-typing-dot { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }
    </style>
</head>
<body class="text-gray-800 h-screen overflow-hidden flex">

    <!-- SIDEBAR NAVIGATION -->
    <aside class="w-64 bg-white h-full shadow-lg flex flex-col justify-between z-20 hidden md:flex">
        <div>
            <!-- Logo Area -->
            <div class="h-20 flex items-center justify-center border-b border-gray-100">
                <div class="flex items-center gap-2">
                    <div class="w-10 h-10 bg-androRed rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-md">
                        A
                    </div>
                    <div>
                        <h1 class="font-bold text-lg text-gray-800">AndroGov</h1>
                        <p class="text-xs text-gray-400">نظام الحوكمة الذكي</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Links -->
            <nav class="mt-6 px-2 space-y-1">
                <a href="#" class="sidebar-item active flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-gauge-high w-5 text-center"></i>
                    <span>لوحة القيادة</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 text-gray-600 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-scale-balanced w-5 text-center"></i>
                    <span>مركز السياسات</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 text-gray-600 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-triangle-exclamation w-5 text-center"></i>
                    <span>سجل المخاطر</span>
                    <span class="mr-auto bg-androRed text-white text-[10px] px-2 py-0.5 rounded-full">2</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 text-gray-600 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-file-signature w-5 text-center"></i>
                    <span>سجل الإفصاحات</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 text-gray-600 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-magnifying-glass-dollar w-5 text-center"></i>
                    <span>التدقيق الداخلي</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 text-gray-600 text-sm font-medium rounded-lg transition-all">
                    <i class="fa-solid fa-users-rectangle w-5 text-center"></i>
                    <span>لجان المجلس</span>
                </a>
            </nav>
        </div>

        <!-- User Profile (Bottom) -->
        <div class="p-4 border-t border-gray-100">
            <div class="flex items-center gap-3">
                <img src="https://ui-avatars.com/api/?name=GRCO&background=FB4747&color=fff" class="w-10 h-10 rounded-full border-2 border-white shadow-sm">
                <div>
                    <h4 class="text-sm font-bold text-gray-800">ضابط الحوكمة</h4>
                    <span class="text-xs text-green-500 flex items-center gap-1">
                        <span class="w-2 h-2 bg-green-500 rounded-full"></span> متصل
                    </span>
                </div>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col h-full relative overflow-hidden">
        
        <!-- Top Header -->
        <header class="h-20 bg-white shadow-sm flex items-center justify-between px-8 z-10">
            <!-- Search -->
            <div class="relative w-96">
                <i class="fa-solid fa-magnifying-glass absolute top-1/2 right-4 -translate-y-1/2 text-gray-400"></i>
                <input type="text" placeholder="ابحث في اللوائح، المخالفات، أو الموظفين..." 
                       class="w-full bg-gray-50 border border-gray-200 rounded-full py-2.5 pr-12 pl-4 text-sm focus:outline-none focus:ring-2 focus:ring-androRed/20 transition-all">
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-6">
                <button class="relative text-gray-500 hover:text-androRed transition-colors">
                    <i class="fa-regular fa-bell text-xl"></i>
                    <span class="absolute -top-1 -right-1 w-4 h-4 bg-androRed text-white text-[10px] font-bold flex items-center justify-center rounded-full border-2 border-white">3</span>
                </button>
                <div class="h-8 w-px bg-gray-200"></div>
                <div class="flex items-center gap-2 text-sm font-medium text-gray-600">
                    <i class="fa-regular fa-calendar"></i>
                    <span>الخميس، 12 أكتوبر 2025</span>
                </div>
            </div>
        </header>

        <!-- Dashboard Content Scrollable Area -->
        <div class="flex-1 overflow-y-auto p-8 scrollbar-hide">
            
            <!-- SECTION A: Compliance Pulse (KPIs) -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Compliance Score -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between group hover:shadow-md transition-all">
                    <div>
                        <p class="text-gray-500 text-sm mb-1">نسبة الامتثال العام</p>
                        <h3 class="text-3xl font-bold text-gray-800">94%</h3>
                        <p class="text-green-500 text-xs mt-2 flex items-center gap-1">
                            <i class="fa-solid fa-arrow-trend-up"></i> +2.4% عن الشهر الماضي
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-green-50 rounded-full flex items-center justify-center text-green-500 text-xl">
                        <i class="fa-solid fa-shield-halved"></i>
                    </div>
                </div>

                <!-- Active Risks -->
                <div class="bg-white p-5 rounded-xl shadow-sm border-l-4 border-l-androRed border-y border-r border-gray-100 flex items-center justify-between group hover:shadow-md transition-all">
                    <div>
                        <p class="text-gray-500 text-sm mb-1">المخاطر النشطة</p>
                        <h3 class="text-3xl font-bold text-gray-800">2</h3>
                        <p class="text-androRed text-xs mt-2 font-medium">تتطلب تدخلاً فورياً</p>
                    </div>
                    <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center text-androRed text-xl">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                    </div>
                </div>

                <!-- Approval Bypass -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between group hover:shadow-md transition-all">
                    <div>
                        <p class="text-gray-500 text-sm mb-1">تجاوزات الصلاحيات</p>
                        <h3 class="text-3xl font-bold text-gray-800">1</h3>
                        <p class="text-yellow-500 text-xs mt-2">تحت المراجعة</p>
                    </div>
                    <div class="w-12 h-12 bg-yellow-50 rounded-full flex items-center justify-center text-yellow-500 text-xl">
                        <i class="fa-solid fa-gavel"></i>
                    </div>
                </div>

                <!-- Pending Updates -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between group hover:shadow-md transition-all">
                    <div>
                        <p class="text-gray-500 text-sm mb-1">تحديثات معلقة</p>
                        <h3 class="text-3xl font-bold text-gray-800">3</h3>
                        <p class="text-gray-400 text-xs mt-2">بانتظار اعتماد المجلس</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-androBlue text-xl">
                        <i class="fa-solid fa-arrows-rotate"></i>
                    </div>
                </div>
            </div>

            <!-- SECTION B: Governance Radar & Risk Map -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Radar Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 lg:col-span-2">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="font-bold text-gray-800 text-lg">مؤشر الامتثال حسب القطاع</h3>
                        <button class="text-gray-400 hover:text-androRed"><i class="fa-solid fa-ellipsis"></i></button>
                    </div>
                    <div class="h-64 flex justify-center">
                        <canvas id="complianceChart"></canvas>
                    </div>
                </div>

                <!-- Alerts List -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-800 text-lg mb-4">تنبيهات حرجة</h3>
                    <div class="space-y-4">
                        <!-- Alert Item 1 -->
                        <div class="p-3 bg-red-50 rounded-lg border border-red-100 flex items-start gap-3">
                            <i class="fa-solid fa-server text-androRed mt-1"></i>
                            <div>
                                <h5 class="text-sm font-bold text-gray-800">محاولة وصول غير مصرح</h5>
                                <p class="text-xs text-gray-600 mt-1">الموظف: NCSO - سيرفر BQ</p>
                                <div class="mt-2 flex gap-2">
                                    <button class="text-[10px] bg-androRed text-white px-2 py-1 rounded hover:bg-red-600">تحقيق</button>
                                    <button class="text-[10px] text-gray-500 hover:text-gray-700">تجاهل</button>
                                </div>
                            </div>
                        </div>
                        <!-- Alert Item 2 -->
                        <div class="p-3 bg-yellow-50 rounded-lg border border-yellow-100 flex items-start gap-3">
                            <i class="fa-solid fa-file-contract text-yellow-600 mt-1"></i>
                            <div>
                                <h5 class="text-sm font-bold text-gray-800">سياسة غير موقعة</h5>
                                <p class="text-xs text-gray-600 mt-1">3 مبرمجين (AndroHealth)</p>
                                <button class="mt-2 text-[10px] border border-yellow-600 text-yellow-600 px-2 py-1 rounded hover:bg-yellow-100">إرسال تذكير</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION C: Live Audit Stream -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="font-bold text-gray-800 text-lg">سجل العمليات الحية (Audit Stream)</h3>
                    <span class="flex items-center gap-2 text-xs text-green-600 bg-green-50 px-3 py-1 rounded-full animate-pulse">
                        <span class="w-2 h-2 bg-green-600 rounded-full"></span> تحديث مباشر
                    </span>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-right">
                        <thead class="bg-gray-50 text-gray-500">
                            <tr>
                                <th class="px-6 py-4 font-medium">الوقت</th>
                                <th class="px-6 py-4 font-medium">العملية</th>
                                <th class="px-6 py-4 font-medium">المُبادِر</th>
                                <th class="px-6 py-4 font-medium">القيمة</th>
                                <th class="px-6 py-4 font-medium">الحالة</th>
                                <th class="px-6 py-4 font-medium">الإجراء</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <!-- Row 1 -->
                            <tr class="hover:bg-gray-50 transition-colors">
                                <td class="px-6 py-4 text-gray-500">10:30 ص</td>
                                <td class="px-6 py-4 font-medium text-gray-800">طلب شراء سيرفرات BQ</td>
                                <td class="px-6 py-4">
                                    <div class="flex items-center gap-2">
                                        <div class="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs">TL</div>
                                        <span>Tech Lead</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-gray-800 font-bold">50,000 ر.س</td>
                                <td class="px-6 py-4">
                                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700">بانتظار التدقيق</span>
                                </td>
                                <td class="px-6 py-4">
                                    <button class="text-androRed hover:underline">مراجعة</button>
                                </td>
                            </tr>
                            <!-- Row 2 -->
                            <tr class="hover:bg-gray-50 transition-colors">
                                <td class="px-6 py-4 text-gray-500">09:15 ص</td>
                                <td class="px-6 py-4 font-medium text-gray-800">صلاحية دخول طارئة</td>
                                <td class="px-6 py-4">
                                    <div class="flex items-center gap-2">
                                        <div class="w-6 h-6 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-xs">NS</div>
                                        <span>NCSO</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-gray-400">-</td>
                                <td class="px-6 py-4">
                                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700">تم الاعتماد</span>
                                </td>
                                <td class="px-6 py-4">
                                    <button class="text-gray-400 hover:text-gray-600"><i class="fa-solid fa-eye"></i></button>
                                </td>
                            </tr>
                            <!-- Row 3 -->
                            <tr class="bg-red-50/50 hover:bg-red-50 transition-colors border-l-4 border-l-androRed">
                                <td class="px-6 py-4 text-gray-500">08:00 ص</td>
                                <td class="px-6 py-4 font-medium text-gray-800">تعديل لائحة العمولات</td>
                                <td class="px-6 py-4">
                                    <div class="flex items-center gap-2">
                                        <div class="w-6 h-6 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center text-xs">SM</div>
                                        <span>Sales Mgr</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-gray-400">-</td>
                                <td class="px-6 py-4">
                                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700">مرفوض آلياً</span>
                                </td>
                                <td class="px-6 py-4">
                                    <button class="text-androRed hover:underline font-bold">التفاصيل</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="h-10"></div> <!-- Spacer -->
        </div>
    </main>

    <!-- ANDROGOV AI ASSISTANT PANEL -->
    <aside class="w-80 bg-white shadow-2xl z-30 flex flex-col border-r border-gray-100 relative">
        <!-- AI Header -->
        <div class="h-20 bg-gradient-to-br from-androDark to-slate-800 flex items-center justify-between px-6 text-white">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <div class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm">
                        <i class="fa-solid fa-robot text-lg"></i>
                    </div>
                    <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-400 border-2 border-slate-800 rounded-full"></span>
                </div>
                <div>
                    <h3 class="font-bold text-sm">AndroGov AI</h3>
                    <p class="text-[10px] text-gray-300 opacity-80">مساعد الحوكمة الذكي</p>
                </div>
            </div>
            <button class="text-white/50 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
        </div>

        <!-- Chat Area -->
        <div class="flex-1 bg-gray-50 p-4 overflow-y-auto space-y-4" id="chatContainer">
            <!-- Time -->
            <div class="text-center text-[10px] text-gray-400">اليوم 10:32 ص</div>

            <!-- User Message -->
            <div class="flex justify-start">
                <div class="bg-white border border-gray-200 text-gray-800 p-3 rounded-2xl rounded-tr-none text-sm max-w-[90%] shadow-sm">
                    هل يوجد تعارض في طلب الشراء رقم <span class="text-blue-600 font-bold">#554</span> مع اللائحة؟
                </div>
            </div>

            <!-- AI Response -->
            <div class="flex justify-end">
                <div class="bg-androBlue text-white p-3 rounded-2xl rounded-tl-none text-sm max-w-[90%] shadow-md">
                    <p class="mb-2">نعم، يوجد تعارضين:</p>
                    <ul class="list-disc list-inside space-y-1 text-xs opacity-90 mb-2">
                        <li>القيمة (50,000) تتجاوز صلاحية المدير التقني.</li>
                        <li>لم يتم إرفاق 3 عروض أسعار (مطلوب للمبالغ فوق 20k).</li>
                    </ul>
                    <p class="font-bold text-xs border-t border-white/20 pt-2 mt-2">الإجراء: النظام قام بتجميد الطلب تلقائياً.</p>
                </div>
            </div>

            <!-- User Message -->
            <div class="flex justify-start">
                <div class="bg-white border border-gray-200 text-gray-800 p-3 rounded-2xl rounded-tr-none text-sm max-w-[90%] shadow-sm">
                    ما هو الإجراء الصحيح الآن؟
                </div>
            </div>

            <!-- AI Typing Indicator -->
            <div class="flex justify-end hidden" id="typingIndicator">
                <div class="bg-androBlue/10 text-androBlue p-3 rounded-2xl rounded-tl-none text-sm flex gap-1 items-center">
                    <span class="w-1.5 h-1.5 bg-androBlue rounded-full ai-typing-dot" style="animation-delay: 0s;"></span>
                    <span class="w-1.5 h-1.5 bg-androBlue rounded-full ai-typing-dot" style="animation-delay: 0.2s;"></span>
                    <span class="w-1.5 h-1.5 bg-androBlue rounded-full ai-typing-dot" style="animation-delay: 0.4s;"></span>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-gray-100">
            <div class="flex gap-2">
                <input type="text" placeholder="اكتب سؤالك للمساعد..." class="flex-1 bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-androBlue transition-colors">
                <button class="bg-androBlue text-white w-10 h-10 rounded-lg flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm">
                    <i class="fa-solid fa-paper-plane text-sm"></i>
                </button>
            </div>
            <div class="flex gap-2 mt-2 overflow-x-auto scrollbar-hide">
                <button class="whitespace-nowrap px-3 py-1 bg-gray-50 text-gray-500 text-[10px] rounded-full hover:bg-gray-100 border border-gray-200">أنشئ مسودة قرار</button>
                <button class="whitespace-nowrap px-3 py-1 bg-gray-50 text-gray-500 text-[10px] rounded-full hover:bg-gray-100 border border-gray-200">تحليل مخاطر</button>
            </div>
        </div>
    </aside>

    <script>
        // --- CHARTS CONFIGURATION ---
        
        // Radar Chart: Compliance by Department
        const ctxRadar = document.getElementById('complianceChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['التقنية (Tech)', 'المبيعات (Sales)', 'الموارد البشرية (HR)', 'الطبية (Medical)', 'المالية (Finance)', 'الإمدادات (Gov)'],
                datasets: [{
                    label: 'نسبة الامتثال الحالية',
                    data: [85, 70, 95, 98, 92, 88],
                    fill: true,
                    backgroundColor: 'rgba(66, 103, 178, 0.2)', // androBlue with opacity
                    borderColor: '#4267B2',
                    pointBackgroundColor: '#4267B2',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#4267B2'
                }, {
                    label: 'الحد الأدنى المقبول',
                    data: [80, 80, 80, 90, 90, 80],
                    fill: true,
                    backgroundColor: 'rgba(251, 71, 71, 0.05)', // androRed very light
                    borderColor: 'rgba(251, 71, 71, 0.4)',
                    pointBackgroundColor: 'rgba(251, 71, 71, 0.4)',
                    pointBorderColor: '#fff',
                    borderDash: [5, 5]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                elements: {
                    line: { borderWidth: 2 }
                },
                scales: {
                    r: {
                        angleLines: { display: true },
                        suggestedMin: 50,
                        suggestedMax: 100,
                        ticks: { backdropColor: 'transparent', font: { family: 'Tajawal' } },
                        pointLabels: { font: { family: 'Tajawal', size: 12, weight: 'bold' } }
                    }
                },
                plugins: {
                    legend: { position: 'bottom', labels: { font: { family: 'Tajawal' } } }
                }
            }
        });

        // --- AI CHAT SIMULATION ---
        setTimeout(() => {
            const typingIndicator = document.getElementById('typingIndicator');
            const chatContainer = document.getElementById('chatContainer');
            
            // Show typing
            typingIndicator.classList.remove('hidden');
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // Simulate response after 2 seconds
            setTimeout(() => {
                typingIndicator.classList.add('hidden');
                const newMsg = document.createElement('div');
                newMsg.className = 'flex justify-end animate-fade-in-up';
                newMsg.innerHTML = `
                    <div class="bg-androBlue text-white p-3 rounded-2xl rounded-tl-none text-sm max-w-[90%] shadow-md">
                        <p>يجب إعادة الطلب إلى <span class="font-bold">منسق المشتريات (PSSC)</span> لاستكمال عروض الأسعار، ثم رفعه للمدير المالي.</p>
                        <div class="mt-2 flex gap-2">
                             <button class="bg-white/20 hover:bg-white/30 text-white text-[10px] px-2 py-1 rounded transition">تنفيذ الإجراء (رفض وإعادة)</button>
                        </div>
                    </div>
                `;
                chatContainer.insertBefore(newMsg, typingIndicator); // Insert before typing indicator div (conceptually) or just append
                chatContainer.insertBefore(typingIndicator, newMsg.nextSibling); // Keep typing indicator at bottom
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 2000);

        }, 1500);

    </script>
</body>
</html>
